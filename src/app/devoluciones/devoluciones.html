<div class="container-fluid px-2 mt-3">
  <div class="header-section mb-3">
    <h5 class="text-primary fw-bold mb-1">üçû DEVOLUCIONES PAN</h5>
    <small class="text-muted">DEVOLUCIONES PAN Fecha: {{ fechaActual | date : 'dd/MM/yyyy' }}</small>
  </div>

  <form [formGroup]="formulario">
    <div class="productos-section">
      <div *ngFor="let producto of productos; let i = index" 
           class="producto-row"
           [class.bandejas-especiales]="producto.codigo === ''">
        
        <!-- C√≥digo y Descripci√≥n en la primera l√≠nea -->
        <div class="producto-info">
          <div class="codigo-section">
            <span class="label-small">C√ìDIGO</span>
            <div class="codigo-value" [class.codigo-empty]="producto.codigo === ''">
              {{ producto.codigo || '---' }}
            </div>
          </div>
          
          <div class="descripcion-section">
            <span class="label-small">DESCRIPCI√ìN</span>
            <div class="descripcion-value" [class.descripcion-bandejas]="producto.codigo === ''">
              {{ producto.descripcion }}
            </div>
          </div>
        </div>
        
        <!-- Input en una l√≠nea separada para mejor visibilidad -->
        <div class="cantidad-section">
          <span class="label-small">CANTIDAD</span>
          <input
            type="number"
            min="0"
            class="form-control input-cantidad"
            [class.input-bandejas]="producto.codigo === ''"
            [formControl]="$any(formulario.get('unidades')).at(i)"
            placeholder="0"
            (focus)="onFocus($event, i)"
            (input)="onInput($event, i)"
          />
        </div>
      </div>
    </div>
    
    <div class="export-section text-center mt-4">
      <button type="button" class="btn btn-success btn-export" (click)="exportarExcel()">
        üìä Exportar a Excel
      </button>
    </div>
  </form>
</div>
